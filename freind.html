<!DOCTYPE html>
<html lang="en">
<head>
<link rel="icon" type="image/png" href="Polish_20250929_214523847.png">
  <link rel="apple-touch-icon" sizes="180x180" href="Polish_20250929_214523847.png">
  
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Enhanced SEO Title: Incorporates primary keywords for better CTR and ranking -->
  <title> CG Play: Free Online Games, Web Games & .io Games - Play Instantly No Download</title>
  <!-- Enhanced Meta Description: 150-160 chars, includes keywords, call-to-action for clicks -->
  <meta name="description" content="Play free online games, web games, .io games & more instantly in your browser at IGS Cloud Games. No downloads required. Enjoy cloud gaming on mobile, PC – action, puzzle, multiplayer hits!">
  <!-- Expanded Keywords: High-volume terms like online games, .io games, web games for relevance -->
  <meta name="keywords" content="online games, free online games, web games, .io games, browser games, cloud gaming, instant play games, multiplayer .io games, no download games, mobile web games, action online games, puzzle web games, IGS games, free browser games, HTML5 games">
  <meta name="author" content="CG Play">
  <meta name="robots" content="index, follow">
  <!-- Additional SEO Metas for Core Web Vitals & Ranking -->
  <meta name="google-site-verification" content="YOUR_VERIFICATION_TOKEN_HERE"> <!-- Add via Google Search Console -->
  <meta name="theme-color" content="#6c5ce7"> <!-- For PWA/mobile ranking boost -->
  
  <!-- Open Graph / Social Media Meta Tags (Optimized for shares) -->
  <meta property="og:title" content="CG Play: Free Online Games, .io Games & Web Games - Instant Play">
  <meta property="og:description" content="Discover free online games, addictive .io games, and web games. Play instantly without downloads on any device. Join millions in cloud gaming fun!">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://cgplay.fun">
  <meta property="og:image" content="https://cgplay.fun/images/cgplay.png">
  <meta property="og:site_name" content="CG Plqy">
  <meta property="og:locale" content="en_US">
  
  <!-- Twitter Card Meta Tags (Enhanced for virality) -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="CG Play: Play Free .io Games, Online Games & More Instantly">
  <meta name="twitter:description" content="Free web games, .io multiplayer battles, and browser-based adventures. No installs – just pure gaming joy on mobile or desktop!">
  <meta name="twitter:image" content="https://cgplay.fun/images/cgplay.png">
  <meta name="twitter:site" content="@cgplay.fun"> <!-- Add your Twitter handle -->
  
  <!-- Canonical URL -->
  <link rel="canonical" href="https://cgplay.fun">
  
  <!-- Structured Data (JSON-LD) for Games & Site - Boosts rich snippets & ranking -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name":"CG aply",
    "url": "https://cgplay.fun",
    "description": "Platform for free online games, .io games, and web games with instant browser play.",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://cgplay.fun/search?q={search_term_string}",
      "query-input": "required name=search_term_string"
    },
    "sameAs": [
      "https://youtube.com/@thefogstudio18",
      "https://www.instagram.com/fogstudio18",
      "https://discord.gg/cgplay" <!-- Add real Discord if available -->
    ]
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    "name": "Free Online Games and .io Games",
    "description": "Browse our collection of free web games, .io multiplayer games, and instant-play browser titles.",
    "url": "https://cgplay.fun",
    "provider": {
      "@type": "Organization",
      "name": "Cg play",
      "url": "https://cgplay.fun"
    },
    "hasOfferCatalog": {
      "@type": "OfferCatalog",
      "name": "Online Games Catalog",
      "itemListElement": [
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Game",
            "name": ".io Games",
            "genre": "Multiplayer",
            "playMode": "Browser"
          }
        },
        {
          "@type": "Offer",
          "itemOffered": {
            "@type": "Game",
            "name": "Web Games",
            "genre": "Action, Puzzle",
            "playMode": "Single-player"
          }
        }
      ]
    }
  }
  </script>
  
  <!-- Preload Critical Resources -->
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Roboto:wght@400;700&display=swap" as="style">
  <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
  
  <!-- Fonts and Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  
  <style>
    /* CSS Variables for Consistent Theming */
    :root {
      --primary: #6c5ce7;
      --primary-dark: #5649c0;
      --secondary: #00cec9;
      --accent: #FFD700;
      --dark: #0d0d0d;
      --dark-light: #1a1a1a;
      --gray: #a4b0be;
      --light: #f5f6fa;
      --success: #00b894;
      --danger: #d63031;
      --card-bg: rgba(35, 35, 35, 0.9);
      --gradient: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      --glass: rgba(255, 255, 255, 0.05);
      --glass-border: rgba(255, 255, 255, 0.1);
      --header-height: 70px;
      --nav-height: 70px;
    }

    /* Reset and Base Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
      font-size: 16px;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(to right, var(--dark), var(--dark-light));
      color: var(--light);
      min-height: 100vh;
      line-height: 1.6;
      overflow-x: hidden;
      padding-top: var(--header-height);
      padding-bottom: var(--nav-height);
    }

    /* Typography */
    h1, h2, h3, h4, h5, h6 {
      font-weight: 600;
      line-height: 1.3;
    }

    p {
      margin-bottom: 1rem;
    }

    a {
      color: var(--secondary);
      text-decoration: none;
      transition: color 0.3s;
    }
 .mobile-menu-btn {
      background: var(--glass);
      border: 1px solid var(--glass-border);
      color: var(--light);
      width: 45px;
      height: 45px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s;
    }

    .mobile-menu-btn:hover {
      background: rgba(108, 92, 231, 0.2);
    }


    .mobile-menu {
      position: fixed;
      top: var(--header-height);
      left: 0;
      width: 100%;
      height: calc(100vh - var(--header-height));
      background: rgba(20, 20, 20, 0.98);
      backdrop-filter: blur(20px);
      z-index: 999;
      transform: translateX(-100%);
      transition: transform 0.3s ease;
      padding: 2rem 1rem;
      overflow-y: auto;
    }

    .mobile-menu.active {
      transform: translateX(0);
    }

    .mobile-search {
      display: flex;
      align-items: center;
      background: var(--glass);
      border: 1px solid var(--glass-border);
      border-radius: 30px;
      padding: 10px 20px;
      margin-bottom: 2rem;
    }

    .mobile-search input {
      background: transparent;
      border: none;
      color: var(--light);
      width: 100%;
      padding: 5px;
      outline: none;
      font-size: 1rem;
    }

    .mobile-search i {
      color: var(--gray);
      margin-right: 10px;
    }

    .mobile-nav {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .mobile-nav-item {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 15px;
      background: var(--glass);
      border: 1px solid var(--glass-border);
      border-radius: 10px;
      color: var(--light);
      transition: all 0.3s;
    }

    .mobile-nav-item:hover, .mobile-nav-item.active {
      background: var(--primary);
      transform: translateX(5px);
    }

    .mobile-nav-item i {
      font-size: 1.2rem;
      width: 25px;
    }

    .mobile-categories {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      margin-bottom: 2rem;
    }

    .mobile-category {
      background: var(--glass);
      border: 1px solid var(--glass-border);
      color: var(--light);
      padding: 12px;
      border-radius: 10px;
      text-align: center;
      font-size: 0.9rem;
      transition: all 0.3s;
    }

    .mobile-category.active, .mobile-category:hover {
      background: var(--primary);
    }

    .mobile-user-actions {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .mobile-user-action {
      display: flex;
      align-items: center;
      gap: 15px;
      padding: 15px;
      background: var(--glass);
      border: 1px solid var(--glass-border);
      border-radius: 10px;
      color: var(--light);
      transition: all 0.3s;
    }

    .mobile-user-action:hover {
      background: rgba(108, 92, 231, 0.2);
    }

    a:hover {
      color: var(--accent);
    }

    /* Header Styles */
    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: var(--header-height);
      background: rgba(25, 25, 25, 0.95);
      backdrop-filter: blur(15px);
      border-bottom: 1px solid var(--glass-border);
      z-index: 1000;
      display: flex;
      align-items: center;
      padding: 0 1rem;
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      text-decoration: none;
    }

    .logo-icon {
      width: 40px;
      height: 40px;
      background: var(--gradient);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 15px rgba(108, 92, 231, 0.3);
    }

    .logo-icon i {
      color: white;
      font-size: 1.5rem;
    }

    .logo-text {
      font-size: 1.3rem;
      font-weight: 700;
      background: linear-gradient(to right, var(--accent), var(--secondary));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .page-title {
      font-size: 1.5rem;
      font-weight: 600;
      color: white;
    }

    .user-actions {
      display: flex;
      gap: 10px;
    }

    .user-actions button {
      background: var(--glass);
      border: 1px solid var(--glass-border);
      color: var(--light);
      width: 45px;
      height: 45px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s;
      position: relative;
    }

    .user-actions button:hover {
      background: rgba(108, 92, 231, 0.2);
      transform: translateY(-2px);
    }

    .notification-badge {
      position: absolute;
      top: -5px;
      right: -5px;
      background: var(--danger);
      color: white;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      font-size: 0.7rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Main Content */
    main {
      max-width: 1200px;
      margin: 0 auto;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    /* Action Buttons */
    .action-buttons {
      display: flex;
      gap: 1rem;
      margin-bottom: 1rem;
    }

    .action-btn {
      display: flex;
      align-items: center;
      gap: 10px;
      background: var(--glass);
      border: 1px solid var(--glass-border);
      color: var(--light);
      padding: 12px 20px;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 0.9rem;
      font-weight: 500;
    }

    .action-btn:hover {
      background: var(--primary);
      transform: translateY(-2px);
      box-shadow: 0 4px 10px rgba(108, 92, 231, 0.3);
    }

    .action-btn i {
      font-size: 1.2rem;
    }

    /* Sections */
    .section {
      background: var(--card-bg);
      backdrop-filter: blur(10px);
      border: 1px solid var(--glass-border);
      border-radius: 15px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }

    .section-title {
      font-size: 1.3rem;
      font-weight: 600;
      color: white;
      position: relative;
      padding-bottom: 8px;
    }

    .section-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 40px;
      height: 3px;
      background: var(--gradient);
      border-radius: 3px;
    }

    .view-all {
      color: var(--secondary);
      text-decoration: none;
      font-size: 0.9rem;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 5px;
      transition: all 0.3s;
    }

    .view-all:hover {
      gap: 10px;
      color: var(--accent);
    }

    /* User List */
    .user-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: 1rem;
    }

    .user-card {
      background: rgba(45, 45, 45, 0.7);
      border: 1px solid var(--glass-border);
      border-radius: 10px;
      padding: 1rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      transition: all 0.3s;
      cursor: pointer;
      position: relative;
    }

    .user-card:hover {
      background: rgba(60, 60, 60, 0.7);
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .user-avatar {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: var(--gradient);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      font-weight: bold;
      color: white;
    }

    .user-info {
      flex: 1;
    }

    .user-name {
      font-weight: 600;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .user-status {
      font-size: 0.8rem;
      color: var(--gray);
    }

    .user-actions-small {
      display: flex;
      gap: 5px;
    }

    .user-action-btn {
      background: var(--glass);
      border: 1px solid var(--glass-border);
      color: var(--light);
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 0.8rem;
    }

    .user-action-btn:hover {
      background: var(--primary);
    }

    .status-indicator {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      position: absolute;
      top: 10px;
      right: 10px;
    }

    .status-online {
      background: var(--success);
    }

    .status-offline {
      background: var(--gray);
    }

    .status-away {
      background: var(--accent);
    }

    /* Chat Area */
    .chat-container {
      display: none;
      position: fixed;
      top: var(--header-height);
      left: 0;
      width: 100%;
      height: calc(100vh - var(--header-height) - var(--nav-height));
      background: var(--dark);
      z-index: 999;
      flex-direction: column;
    }

    .chat-container.active {
      display: flex;
    }

    .chat-header {
      background: rgba(25, 25, 25, 0.95);
      backdrop-filter: blur(15px);
      border-bottom: 1px solid var(--glass-border);
      padding: 1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .chat-user-info {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .chat-back-btn {
      background: none;
      border: none;
      color: var(--light);
      font-size: 1.5rem;
      cursor: pointer;
      transition: all 0.3s;
    }

    .chat-back-btn:hover {
      color: var(--accent);
    }

    .chat-messages {
      flex: 1;
      padding: 1rem;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .message {
      max-width: 70%;
      padding: 12px 16px;
      border-radius: 18px;
      position: relative;
      animation: fadeIn 0.3s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .message-sent {
      align-self: flex-end;
      background: var(--primary);
      border-bottom-right-radius: 4px;
    }

    .message-received {
      align-self: flex-start;
      background: var(--glass);
      border-bottom-left-radius: 4px;
    }

    .message-sender {
      font-size: 0.8rem;
      font-weight: 600;
      margin-bottom: 5px;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .message-text {
      font-size: 0.95rem;
    }

    .message-time {
      font-size: 0.7rem;
      opacity: 0.7;
      text-align: right;
      margin-top: 5px;
    }

    .chat-input-container {
      display: flex;
      padding: 1rem;
      background: rgba(25, 25, 25, 0.95);
      border-top: 1px solid var(--glass-border);
      gap: 10px;
    }

    .chat-input {
      flex: 1;
      background: var(--glass);
      border: 1px solid var(--glass-border);
      border-radius: 20px;
      padding: 12px 20px;
      color: var(--light);
      font-size: 1rem;
      outline: none;
      transition: all 0.3s;
    }

    .chat-input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 2px rgba(108, 92, 231, 0.3);
    }

    .chat-send-btn {
      background: var(--gradient);
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 10px rgba(108, 92, 231, 0.4);
    }

    .chat-send-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(108, 92, 231, 0.6);
    }

    /* Modals */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(5px);
      z-index: 1000;
      display: none;
      align-items: center;
      justify-content: center;
    }

    .modal-overlay.active {
      display: flex;
    }

    .modal {
      background: var(--card-bg);
      backdrop-filter: blur(15px);
      border: 1px solid var(--glass-border);
      border-radius: 15px;
      width: 90%;
      max-width: 500px;
      padding: 2rem;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      animation: modalFadeIn 0.3s ease;
    }

    @keyframes modalFadeIn {
      from { opacity: 0; transform: scale(0.9); }
      to { opacity: 1; transform: scale(1); }
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }

    .modal-title {
      font-size: 1.3rem;
      font-weight: 600;
      color: white;
    }

    .modal-close {
      background: none;
      border: none;
      color: var(--gray);
      font-size: 1.5rem;
      cursor: pointer;
      transition: all 0.3s;
    }

    .modal-close:hover {
      color: var(--light);
    }

    .modal-input {
      width: 100%;
      background: var(--glass);
      border: 1px solid var(--glass-border);
      border-radius: 10px;
      padding: 12px 15px;
      color: var(--light);
      font-size: 1rem;
      margin-bottom: 1rem;
      outline: none;
      transition: all 0.3s;
    }

    .modal-input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 2px rgba(108, 92, 231, 0.3);
    }

    .modal-btn {
      background: var(--gradient);
      border: none;
      border-radius: 10px;
      padding: 12px 20px;
      color: white;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      width: 100%;
      margin-top: 1rem;
    }

    .modal-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(108, 92, 231, 0.4);
    }

    .friend-checkbox-list {
      max-height: 200px;
      overflow-y: auto;
      margin: 1rem 0;
    }

    .friend-checkbox-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px;
      border-radius: 8px;
      transition: all 0.3s;
      cursor: pointer;
    }

    .friend-checkbox-item:hover {
      background: var(--glass);
    }

    .friend-checkbox-item input {
      margin: 0;
    }

    /* Bottom Navigation */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: var(--nav-height);
      background: rgba(20, 20, 20, 0.95);
      backdrop-filter: blur(15px);
      display: flex;
      justify-content: space-around;
      align-items: center;
      padding: 10px 0;
      border-top: 1px solid var(--glass-border);
      z-index: 100;
    }

    .nav-btn {
      background: none;
      border: none;
      color: var(--gray);
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 0.7rem;
      gap: 5px;
      cursor: pointer;
      transition: all 0.3s;
      width: 60px;
      position: relative;
    }

    .nav-btn::before {
      content: '';
      position: absolute;
      top: -10px;
      width: 0;
      height: 3px;
      background: var(--gradient);
      border-radius: 3px;
      transition: width 0.3s;
    }

    .nav-btn.active::before, .nav-btn:hover::before {
      width: 25px;
    }

    .nav-btn.active, .nav-btn:hover {
      color: var(--accent);
    }

    .nav-btn i {
      font-size: 1.2rem;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .header-content {
        padding: 0 1rem;
      }
      
      .logo-text {
        font-size: 1.1rem;
      }
      
      .page-title {
        font-size: 1.2rem;
      }
      
      .user-list {
        grid-template-columns: 1fr;
      }
      
      .action-buttons {
        flex-direction: column;
      }
      
      .modal {
        width: 95%;
        padding: 1.5rem;
      }
    }

    @media (max-width: 480px) {
      .header-content {
        padding: 0 0.5rem;
      }
      
      .logo-text {
        display: none;
      }
      
      .page-title {
        font-size: 1.1rem;
      }
      
      .section {
        padding: 1rem;
      }
      
      .message {
        max-width: 85%;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header>
    <div class="header-content">
      <a href="#" class="logo">
        <div class="logo-icon">
          <i class="fas" style="font-size:15px;" >C G</i>
        </div>
        <span class="logo-text">Play</span>
      </a>     
      <button class="mobile-menu-btn" aria-label="Open menu">
        <i class="fas fa-bars"></i>
      </button>
    </div>
  </header>

  <!-- Mobile Menu -->
  <div class="mobile-menu">
    <div class="mobile-search">
      <i class="fas fa-search"></i>
      <input type="text" placeholder="Search games..." aria-label="Search games">
    </div>
    
    <nav class="mobile-nav">
      <a href="#" class="mobile-nav-item" onclick="location.href='index.html'">
        <i class="fas fa-home"></i>
        <span>Home</span>
      </a>
      <a href="#" class="mobile-nav-item">
        <i class="fas fa-gamepad" onclick="location.href='games.html'"></i>
        <span>Games</span>
      </a>
      <a href="#" class="mobile-nav-item active">
        <i class="fas fa-user-friends"></i>
        <span>Friends</span>
      </a>
      <a href="#" class="mobile-nav-item">
        <i class="fas fa-trophy" onclick="location.href='leaderboard.html'"></i>
        <span>Leaderboard</span>
      </a>
    </nav>
    
    <h3 style="color: white; margin-bottom: 1rem;">Categories</h3>
    <div class="mobile-categories">
      <button class="mobile-category active">All Games</button>
    </div>
    
    <div class="mobile-user-actions">
      <a href="#" class="mobile-user-action" onclick="location.href='auth.html'">
        <i class="fas fa-sign-out-alt"></i>
        <span>Logout</span>
      </a>
    </div>
  </div>


  <!-- Main Content -->
  <main>
    <!-- Action Buttons -->
    <div class="action-buttons">
      <button class="action-btn" onclick="showModal('addFriendModal')">
        <i class="fas fa-user-plus"></i>
        Add Friend
      </button>
      <button class="action-btn" onclick="showModal('createGroupModal')">
        <i class="fas fa-users"></i>
        Create Group
      </button>
    </div>

    <!-- Friend Requests Section -->
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">Friend Requests</h2>
        <a href="#" class="view-all">View All <i class="fas fa-arrow-right"></i></a>
      </div>
      <div id="requestList" class="user-list">
        <!-- Friend requests will be loaded here -->
      </div>
    </section>

    <!-- Friends Section -->
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">Friends</h2>
        <a href="#" class="view-all">View All <i class="fas fa-arrow-right"></i></a>
      </div>
      <div id="friendList" class="user-list">
        <!-- Friends will be loaded here -->
      </div>
    </section>

    <!-- Groups Section -->
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">Groups</h2>
        <a href="#" class="view-all">View All <i class="fas fa-arrow-right"></i></a>
      </div>
      <div id="groupList" class="user-list">
        <!-- Groups will be loaded here -->
      </div>
    </section>

    <!-- Communities Section -->
    <section class="section">
      <div class="section-header">
        <h2 class="section-title">Communities</h2>
        <a href="#" class="view-all">View All <i class="fas fa-arrow-right"></i></a>
      </div>
      <div id="communityList" class="user-list">
        <!-- Communities will be loaded here -->
      </div>
    </section>
  </main>

  <!-- Chat Container -->
  <div class="chat-container" id="chatContainer">
    <div class="chat-header">
      <button class="chat-back-btn" onclick="closeChat()">
        <i class="fas fa-arrow-left"></i>
      </button>
      <div class="chat-user-info">
        <div class="user-avatar" id="chatUserAvatar">U</div>
        <div>
          <div class="user-name" id="chatUserName">User Name</div>
          <div class="user-status" id="chatUserStatus">Online</div>
        </div>
      </div>
      <div class="user-actions-small">
        <button class="user-action-btn" aria-label="Voice call">
          <i class="fas fa-phone"></i>
        </button>
        <button class="user-action-btn" aria-label="Video call">
          <i class="fas fa-video"></i>
        </button>
      </div>
    </div>
    
    <div class="chat-messages" id="chatMessages">
      <!-- Messages will be displayed here -->
    </div>
    
    <div class="chat-input-container">
      <input type="text" class="chat-input" id="messageInput" placeholder="Type a message...">
      <button class="chat-send-btn" onclick="sendMessage()">
        <i class="fas fa-paper-plane"></i>
      </button>
    </div>
  </div>

  <!-- Modals -->
  <div class="modal-overlay" id="modalOverlay">
    <!-- Add Friend Modal -->
    <div class="modal" id="addFriendModal">
      <div class="modal-header">
        <h3 class="modal-title">Add Friend</h3>
        <button class="modal-close" onclick="hideModals()">&times;</button>
      </div>
      <input type="text" class="modal-input" id="friendName" placeholder="Enter friend's username">
      <button class="modal-btn" onclick="sendFriendRequest()">Send Request</button>
    </div>

    <!-- Create Group Modal -->
    <div class="modal" id="createGroupModal">
      <div class="modal-header">
        <h3 class="modal-title">Create Group</h3>
        <button class="modal-close" onclick="hideModals()">&times;</button>
      </div>
      <input type="text" class="modal-input" id="groupName" placeholder="Group name">
      <div class="friend-checkbox-list" id="friendCheckboxList">
        <!-- Friend checkboxes will be loaded here -->
      </div>
      <button class="modal-btn" onclick="createGroupWithFriends()">Create Group</button>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <button class="nav-btn" onclick="location.href='index.html'">
      <i class="fas fa-home"></i>
      <span>Home</span>
    </button>
    <button class="nav-btn" onclick="location.href='games.html'">
      <i class="fas fa-gamepad"></i>
      <span>Games</span>
    </button>

    <button class="nav-btn active"  >
      <i class="fas fa-user-friends"></i>
      <span>Friends</span>
    </button>
    <button class="nav-btn" onclick="location.href='leaderboard.html'">
      <i class="fas fa-trophy"></i>
      <span>Leaderboard</span>
    </button>
  </nav>

  <script>
    // Firebase Initialization
    const firebaseConfig = {
      apiKey: "AIzaSyCRtPZ34Y1J-p5b7FJxEUagYg3h_D6PbhM",
      authDomain: "igsfogstudio-df541.firebaseapp.com",
      projectId: "igsfogstudio-df541",
      storageBucket: "igsfogstudio-df541.appspot.com",
      messagingSenderId: "206722625476",
      appId: "1:206722625476:web:c222830b5404f87bf57e91"
    };
    
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    let currentUser = null;
    let currentChat = null;
    let verifiedUsers = {};

    // Auth check and data load
    auth.onAuthStateChanged(async user => {
      if (!user) return location.href = 'auth.html';
      currentUser = user;

      const userRef = db.collection('users').doc(user.uid);
      const userDoc = await userRef.get();
      if (!userDoc.exists || !userDoc.data().name) {
        const name = user.displayName || user.email.split('@')[0];
        await userRef.set({ name, email: user.email }, { merge: true });
      }

      loadFriends();
      loadGroups();
      loadRequests();
      loadCommunities();
      loadVerifiedUsers();
    });

    // Load verified users
    function loadVerifiedUsers() {
      db.collection("users").get().then(snapshot => {
        snapshot.forEach(doc => {
          const data = doc.data();
          if (data.verified && data.verifiedType) {
            verifiedUsers[doc.id] = { type: data.verifiedType };
          }
        });
      });
    }

    const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
    const mobileMenu = document.querySelector('.mobile-menu');

    // Toggle mobile menu
    mobileMenuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('active');
    });

    // Close mobile menu when clicking outside
    document.addEventListener('click', (e) => {
      if (!mobileMenu.contains(e.target) && !mobileMenuBtn.contains(e.target)) {
        mobileMenu.classList.remove('active');
      }
    });

    // Get verified badge HTML
    function getVerifiedBadge(uid) {
      const user = verifiedUsers[uid];
      if (!user) return '';

      const colors = {
        fire: 'linear-gradient(135deg, #FFD700, #FF4500)',
        green: '#00e676',
        gold: '#FFD700',
        og: '#ccc'
      };

      const color = colors[user.type] || '#ccc';
      
      return `<span class="verified-badge" style="
        display: inline-block;
        width: 16px;
        height: 16px;
        margin-left: 5px;
        background: ${color};
        -webkit-mask: url('https://upload.wikimedia.org/wikipedia/commons/b/bc/Checkmark_green.svg') no-repeat center;
        mask: url('https://upload.wikimedia.org/wikipedia/commons/b/bc/Checkmark_green.svg') no-repeat center;
        -webkit-mask-size: contain;
        mask-size: contain;
      "></span>`;
    }

    // Load friends list
    function loadFriends() {
      const list = document.getElementById('friendList');
      list.innerHTML = '<div class="loading">Loading friends...</div>';
      
      db.collection('users').doc(currentUser.uid).collection('friends').get().then(async snapshot => {
        if (snapshot.empty) {
          list.innerHTML = '<div class="no-data">No friends yet. Add some friends to start chatting!</div>';
          return;
        }

        let html = '';
        for (const doc of snapshot.docs) {
          const data = doc.data();
          const friendId = doc.id;
          
          // Get last message
          const msgSnap = await db.collection('users')
            .doc(currentUser.uid).collection('chats').doc(friendId)
            .collection('messages').orderBy('time', 'desc').limit(1).get();

          const lastMsg = !msgSnap.empty ? msgSnap.docs[0].data().text || '' : '';
          const badge = getVerifiedBadge(friendId);
          
          html += `
            <div class="user-card" onclick="openChat('${friendId}', '${data.name}', 'friend')">
              <div class="user-avatar">${data.name.charAt(0).toUpperCase()}</div>
              <div class="user-info">
                <div class="user-name">${data.name}${badge}</div>
                <div class="user-status">${lastMsg || 'No messages yet'}</div>
              </div>
              <div class="status-indicator status-online"></div>
            </div>
          `;
        }
        list.innerHTML = html;
      });
    }

    // Load groups
    function loadGroups() {
      const list = document.getElementById('groupList');
      list.innerHTML = '<div class="loading">Loading groups...</div>';
      
      db.collection('groups').where('members', 'array-contains', currentUser.uid).get().then(snapshot => {
        if (snapshot.empty) {
          list.innerHTML = '<div class="no-data">No groups yet. Create a group to start chatting with multiple friends!</div>';
          return;
        }

        let html = '';
        snapshot.forEach(doc => {
          const data = doc.data();
          db.collection('groups').doc(doc.id).collection('members').get().then(membersSnap => {
            const count = membersSnap.size;
            html += `
              <div class="user-card" onclick="openChat('${doc.id}', '${data.name}', 'group')">
                <div class="user-avatar" style="background: var(--secondary);"><i class="fas fa-users"></i></div>
                <div class="user-info">
                  <div class="user-name">${data.name}</div>
                  <div class="user-status">${count} members</div>
                </div>
                <div class="status-indicator status-online"></div>
              </div>
            `;
            list.innerHTML = html;
          });
        });
      });
    }

    // Load friend requests
    function loadRequests() {
      const list = document.getElementById('requestList');
      list.innerHTML = '<div class="loading">Loading requests...</div>';
      
      db.collection('users').doc(currentUser.uid).collection('requests').get().then(snapshot => {
        if (snapshot.empty) {
          list.innerHTML = '<div class="no-data">No pending friend requests</div>';
          return;
        }

        let html = '';
        snapshot.forEach(doc => {
          const data = doc.data();
          html += `
            <div class="user-card">
              <div class="user-avatar">${data.name.charAt(0).toUpperCase()}</div>
              <div class="user-info">
                <div class="user-name">${data.name}</div>
                <div class="user-status">Wants to be your friend</div>
              </div>
              <div class="user-actions-small">
                <button class="user-action-btn" onclick="acceptRequest('${doc.id}')" title="Accept">
                  <i class="fas fa-check"></i>
                </button>
                <button class="user-action-btn" onclick="rejectRequest('${doc.id}')" title="Reject">
                  <i class="fas fa-times"></i>
                </button>
              </div>
            </div>
          `;
        });
        list.innerHTML = html;
      });
    }

    // Load communities
    function loadCommunities() {
      const list = document.getElementById('communityList');
      const states = ["All India 🇮🇳", "#Punjab", "#Rajasthan", "#Bihar", "#Haryana", "#Tamil Nadu"];
      
      let html = '';
      states.forEach(state => {
        const id = 'community_' + state.replace(/\s|🇮🇳/g, '');
        db.collection('groups').doc(id).collection('members').get().then(snapshot => {
          html += `
            <div class="user-card" onclick="openChat('${id}', '${state}', 'group')">
              <div class="user-avatar" style="background: var(--primary);"><i class="fas fa-globe"></i></div>
              <div class="user-info">
                <div class="user-name">${state}</div>
                <div class="user-status">${snapshot.size} members</div>
              </div>
              <div class="status-indicator status-online"></div>
            </div>
          `;
          list.innerHTML = html;
        });
      });
    }

    // Send friend request
    function sendFriendRequest() {
      const name = document.getElementById('friendName').value.trim();
      if (!name) {
        alert("Enter a valid name");
        return;
      }

      db.collection("users").where("name", "==", name).get()
        .then(snapshot => {
          if (snapshot.empty) {
            alert("No user found with this name");
            return;
          }

          const friendDoc = snapshot.docs[0];
          const friendId = friendDoc.id;

          if (friendId === currentUser.uid) {
            alert("You can't add yourself");
            return;
          }

          db.collection("users").doc(friendId)
            .collection("requests")
            .doc(currentUser.uid)
            .set({
              name: currentUser.displayName || currentUser.email,
              from: currentUser.uid
            })
            .then(() => {
              alert("Friend request sent");
              hideModals();
            })
            .catch(err => {
              console.error("Error sending request", err);
              alert("Failed to send request");
            });
        })
        .catch(err => {
          console.error("Error searching user", err);
          alert("Search failed");
        });
    }

    // Accept friend request
    function acceptRequest(friendId) {
      db.collection('users').doc(friendId).get().then(doc => {
        const data = doc.data();

        db.collection('users').doc(currentUser.uid).collection('friends').doc(friendId).set({
          name: data.name || data.email
        });
        db.collection('users').doc(friendId).collection('friends').doc(currentUser.uid).set({
          name: currentUser.displayName || currentUser.email
        });

        db.collection('users').doc(currentUser.uid).collection('requests').doc(friendId).delete();

        loadRequests();
        loadFriends();
      });
    }

    // Reject friend request
    function rejectRequest(friendId) {
      db.collection('users').doc(currentUser.uid).collection('requests').doc(friendId).delete().then(() => {
        loadRequests();
      });
    }

    // Create group with friends
    function createGroupWithFriends() {
      const name = document.getElementById('groupName').value.trim();
      if (!name) return alert("Enter a group name");

      const selectedFriends = [...document.querySelectorAll('.friend-checkbox:checked')].map(cb => cb.value);
      if (selectedFriends.length === 0) return alert("Select at least one friend");

      const groupId = db.collection('groups').doc().id;

      db.collection('groups').doc(groupId).set({
        name,
        members: [currentUser.uid, ...selectedFriends],
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      }).then(() => {
        const batch = db.batch();
        [currentUser.uid, ...selectedFriends].forEach(uid => {
          const ref = db.collection('groups').doc(groupId).collection('members').doc(uid);
          batch.set(ref, { joinedAt: firebase.firestore.FieldValue.serverTimestamp() });
        });
        return batch.commit();
      }).then(() => {
        alert("Group created successfully");
        hideModals();
        loadGroups();
      }).catch(err => {
        console.error("Error creating group:", err);
        alert("Error creating group");
      });
    }

    // Open chat
    function openChat(id, name, type) {
      currentChat = { id, type, name };
      document.getElementById('chatUserName').textContent = name;
      document.getElementById('chatUserAvatar').textContent = name.charAt(0).toUpperCase();
      document.getElementById('chatContainer').classList.add('active');

      const ref = type === 'friend'
        ? db.collection('users').doc(currentUser.uid).collection('chats').doc(id).collection('messages')
        : db.collection('groups').doc(id).collection('messages');

      ref.orderBy('time').onSnapshot(snapshot => {
        const chatMessages = document.getElementById('chatMessages');
        chatMessages.innerHTML = '';
        
        snapshot.forEach(doc => {
          const msg = doc.data();
          const isOwn = msg.senderId === currentUser.uid;
          const badge = getVerifiedBadge(msg.senderId);
          
          const messageEl = document.createElement('div');
          messageEl.className = `message ${isOwn ? 'message-sent' : 'message-received'}`;
          
          messageEl.innerHTML = `
            ${!isOwn ? `<div class="message-sender">${msg.senderName}${badge}</div>` : ''}
            <div class="message-text">${msg.text}</div>
            <div class="message-time">${msg.time ? new Date(msg.time.toDate()).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'}) : 'Just now'}</div>
          `;
          
          chatMessages.appendChild(messageEl);
        });
        
        chatMessages.scrollTop = chatMessages.scrollHeight;
      });
    }

    // Close chat
    function closeChat() {
      document.getElementById('chatContainer').classList.remove('active');
      currentChat = null;
    }

    // Send message
    function sendMessage() {
      const text = document.getElementById('messageInput').value.trim();
      if (!text || !currentChat) return;

      db.collection('users').doc(currentUser.uid).get().then(doc => {
        const userData = doc.data();
        const msg = {
          text,
          senderId: currentUser.uid,
          senderName: userData.name || currentUser.email,
          time: firebase.firestore.FieldValue.serverTimestamp()
        };

        if (currentChat.type === 'friend') {
          db.collection('users').doc(currentUser.uid).collection('chats').doc(currentChat.id).collection('messages').add(msg);
          db.collection('users').doc(currentChat.id).collection('chats').doc(currentUser.uid).collection('messages').add(msg);
        } else {
          db.collection('groups').doc(currentChat.id).collection('messages').add(msg);
        }

        document.getElementById('messageInput').value = '';
      });
    }

    // Modal functions
    function showModal(id) {
      if (id === 'createGroupModal') {
        db.collection('users').doc(currentUser.uid).collection('friends').get().then(snapshot => {
          let html = '';
          snapshot.forEach(doc => {
            const data = doc.data();
            html += `
              <div class="friend-checkbox-item">
                <input type="checkbox" class="friend-checkbox" value="${doc.id}" id="friend-${doc.id}">
                <label for="friend-${doc.id}">${data.name}</label>
              </div>
            `;
          });
          document.getElementById('friendCheckboxList').innerHTML = html;
        });
      }
      
      document.getElementById('modalOverlay').classList.add('active');
      document.getElementById(id).style.display = 'block';
    }

    function hideModals() {
      document.getElementById('modalOverlay').classList.remove('active');
      document.querySelectorAll('.modal').forEach(modal => {
        modal.style.display = 'none';
      });
    }

    // Handle Enter key in message input
    document.getElementById('messageInput').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        sendMessage();
      }
    });

    // Handle Enter key in friend name input
    document.getElementById('friendName').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        sendFriendRequest();
      }
    });
  </script>
</body>
</html>
