<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5">
    
    <!-- ‚ú¶‚ú¶‚ú¶ COMPLETE SEO & IDENTITY ‚ú¶‚ú¶‚ú¶ -->
    <title>CGPlay - Download Movies Free | Tamil, Hindi, Telugu HD Movies</title>
    <meta name="description" content="Download movies free in HD quality. Tamil movie download, Hindi movie download, Telugu movies download. Best free movie download website 2025.">
    <meta name="keywords" content="free movies site, download movies free, tamil movie download, hindi movie download, telugu movies download, hd movies download">
    <meta name="author" content="CGPlay">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://cgplay.fun">
    
    <!-- Open Graph / Facebook / Discord -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="CGPlay - Free Movie Downloads | Tamil, Hindi, Telugu HD">
    <meta property="og:description" content="Download latest movies free. HD MP4 movies. New releases, Tamil dubbed movies.">
    <meta property="og:image" content="https://placehold.co/1200x630/0d0d17/e50914?text=CGPLAY+Free+Movies">
    <meta property="og:url" content="https://cgplay-a2384.web.app">
    <meta property="og:site_name" content="CGPlay">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="CGPlay - Download Movies Free | HD MP4">
    <meta name="twitter:description" content="Free movie download website. Tamil, Hindi, Telugu movies.">
    <meta name="twitter:image" content="https://placehold.co/1200x630/0d0d17/e50914?text=Free+Movie+Downloads">
<script src="https://pl28741558.effectivegatecpm.com/75/d2/a2/75d2a2a9cfc95f6bce8a57c4ef85110d.js"></script>
    <!-- Schema.org -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "CGPlay - Free Movie Download Website",
      "url": "https://cgplay-a2384.web.app",
      "description": "Download movies free in HD quality. Tamil, Hindi, Telugu movies available for instant download.",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://cgplay-a2384.web.app/?search={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>

    <!-- Favicon / Manifest -->
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="192x192" href="/android-chrome-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="/android-chrome-512x512.png">
    <link rel="manifest" href="/site.webmanifest">
    <meta name="theme-color" content="#ffffff">

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,400;14..32,500;14..32,600;14..32,700;14..32,800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        /* ---------- CGPLAY ‚Äì CINEMA DARK THEME ‚Äì FULLY RESPONSIVE ---------- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Inter', sans-serif;
            background: #0a0a0e;
            background: radial-gradient(circle at 30% 10%, #14141c 0%, #0b0b10 90%);
            color: #f0f0fa;
            line-height: 1.5;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .site-header {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            background: rgba(8,8,12,0.9);
            backdrop-filter: blur(16px);
            border-bottom: 1px solid rgba(229,9,20,0.25);
            padding: 0.8rem 2rem;
            box-shadow: 0 8px 20px rgba(0,0,0,0.6);
        }
        .logo-container {
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }
        .logo-link {
            display: flex;
            align-items: center;
            text-decoration: none;
        }
        .site-logo {
            width: 150px;
            max-height: 52px;
            object-fit: contain;
            filter: drop-shadow(0 0 6px #e5091466);
            transition: filter 0.2s;
            border-radius: 8px;
        }
        .site-logo:hover { filter: drop-shadow(0 0 12px #e50914); }
        .brand-text {
            font-size: 2rem;
            font-weight: 800;
            letter-spacing: -2px;
            background: linear-gradient(to right, #ffffff, #d4d4ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .brand-text span { color: #e50914; background: none; }
        .header-right {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        .filebase-badge {
            background: #1e1e28;
            padding: 0.4rem 1.2rem;
            border-radius: 40px;
            font-size: 0.8rem;
            font-weight: 500;
            color: #b0b8ff;
            border: 1px solid #334155;
            display: flex;
            align-items: center;
            gap: 6px;
            white-space: nowrap;
        }
        .seo-header {
            max-width: 1200px;
            margin: 1.5rem auto 0;
            padding: 0 2rem;
            text-align: center;
        }
        .seo-header h1 {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(135deg, #e50914 0%, #ff4655 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 0.5rem;
        }
        .seo-header p {
            color: #9ca3af;
            font-size: 0.95rem;
            line-height: 1.6;
        }
        .search-section {
            max-width: 800px;
            margin: 2rem auto 1rem;
            width: 90%;
            padding: 0 0.5rem;
        }
        .search-container {
            display: flex;
            align-items: center;
            background: #1c1c26;
            border-radius: 60px;
            border: 1px solid #3a3a4a;
            padding: 0.2rem 0.2rem 0.2rem 1.5rem;
            backdrop-filter: blur(8px);
            box-shadow: 0 12px 30px -12px black;
            transition: border 0.2s, box-shadow 0.2s;
        }
        .search-container:focus-within {
            border-color: #e50914;
            box-shadow: 0 0 0 3px rgba(229,9,20,0.2);
        }
        .search-container i { color: #9ca3af; font-size: 1rem; }
        #searchInput {
            flex: 1;
            background: transparent;
            border: none;
            padding: 0.8rem 0.6rem;
            font-size: 1rem;
            color: white;
            font-weight: 400;
            outline: none;
            min-width: 0;
        }
        #searchInput::placeholder { color: #6b7280; font-size: 0.95rem; }
        .search-btn {
            background: #e50914;
            border: none;
            color: white;
            font-weight: 600;
            padding: 0.7rem 1.8rem;
            border-radius: 50px;
            font-size: 0.95rem;
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            border: 1px solid rgba(255,255,255,0.15);
            white-space: nowrap;
        }
        .search-btn:hover { background: #b8070f; transform: scale(1.01); }

        /* ---------- MOVIE GRID ‚Äì ADAPTIVE COLUMNS ---------- */
        .movies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
            gap: 1.8rem;
            padding: 2rem 2.2rem 1rem;
            max-width: 1600px;
            margin: 0 auto;
            width: 100%;
        }
        .movie-card {
            aspect-ratio: 1 / 1;
            background: #14141c;
            border-radius: 24px;
            border: 1px solid rgba(255,255,255,0.05);
            transition: all 0.25s ease;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 20px 30px -15px black;
            width: 100%;
        }
        .movie-card:hover {
            transform: translateY(-6px);
            border-color: rgba(229,9,20,0.6);
            box-shadow: 0 30px 40px -16px rgba(229,9,20,0.3);
        }
        .movie-poster {
            width: 100%;
            height: 60%;
            object-fit: cover;
            object-position: center 20%;
            background: #1e1e28;
            border-bottom: 1px solid #2c2c3a;
            display: block;
        }
        .movie-info {
            padding: 0.9rem 1rem 0.8rem;
            display: flex;
            flex-direction: column;
            flex: 1;
            background: linear-gradient(0deg, #12121a, #181822);
            overflow-y: auto;
            gap: 0.2rem;
        }
        .movie-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.2rem;
            line-height: 1.2;
            color: white;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            word-break: break-word;
        }
        .movie-description {
            font-size: 0.78rem;
            color: #cbd5e1;
            margin-bottom: 0.2rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            line-height: 1.3;
        }
        .screenshot-container {
            margin: 0.2rem 0 0.2rem;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid #363646;
            background: #0b0b12;
            flex-shrink: 0;
            height: 60px;
            width: 100%;
            display: none; /* hidden on homepage */
        }
        .download-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: #e50914;
            color: white;
            font-weight: 600;
            padding: 0.5rem 0.6rem;
            border-radius: 30px;
            text-decoration: none;
            margin-top: 0.2rem;
            gap: 6px;
            font-size: 0.8rem;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 6px 14px rgba(229,9,20,0.3);
            transition: background 0.2s;
            width: 100%;
            letter-spacing: 0.3px;
        }
        .download-btn i { font-size: 0.75rem; }
        .download-btn:hover {
            background: #b2070f;
            box-shadow: 0 12px 22px -8px #e50914;
        }
        .status-message, .no-results {
            grid-column: 1 / -1;
            text-align: center;
            padding: 2.8rem 1.5rem;
            background: rgba(20,20,30,0.5);
            border-radius: 60px;
            color: #a0a0b0;
            font-size: 1.2rem;
            border: 1px dashed #4b5563;
            backdrop-filter: blur(10px);
        }
        #movieCounter {
            margin-top: 0.6rem;
            color: #9ca3af;
            text-align: center;
            font-size: 0.9rem;
        }

        /* ---------- PAGINATION CONTROLS ---------- */
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            flex-wrap: wrap;
            padding: 2rem 1rem 3rem;
            max-width: 1600px;
            margin: 0 auto;
        }
        .pagination button {
            background: #1e1e28;
            border: 1px solid #3a3a4a;
            color: #f0f0fa;
            padding: 0.6rem 1.2rem;
            border-radius: 30px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
        }
        .pagination button:hover:not(:disabled) {
            background: #e50914;
            border-color: #e50914;
            transform: scale(1.02);
        }
        .pagination button:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }
        .pagination .active-page {
            background: #e50914;
            border-color: #e50914;
        }
        .page-numbers {
            display: flex;
            gap: 0.3rem;
            flex-wrap: wrap;
            justify-content: center;
        }
        .page-numbers button {
            min-width: 2.5rem;
            justify-content: center;
        }

        .seo-content {
            max-width: 1200px;
            margin: 3rem auto 2rem;
            padding: 2rem;
            background: rgba(20,20,28,0.6);
            border-radius: 20px;
            border: 1px solid rgba(255,255,255,0.05);
        }
        .seo-content h2 {
            font-size: 1.5rem;
            color: #e50914;
            margin-bottom: 1rem;
        }
        .seo-content p {
            color: #cbd5e1;
            line-height: 1.8;
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }
        .seo-content ul {
            list-style: none;
            padding: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.8rem;
            margin: 1.5rem 0;
        }
        .seo-content li {
            color: #9ca3af;
            padding: 0.5rem;
            background: rgba(255,255,255,0.02);
            border-radius: 8px;
            font-size: 0.9rem;
        }
        .seo-content li i { color: #e50914; margin-right: 0.5rem; }
        footer {
            text-align: center;
            padding: 1.8rem;
            color: #6b7280;
            border-top: 1px solid #1f2937;
            margin-top: 2rem;
            background: rgba(6,6,10,0.8);
            font-size: 0.85rem;
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
        }

        /* ‚ú¶‚ú¶‚ú¶ RESPONSIVE FINE-TUNING ‚ú¶‚ú¶‚ú¶ */
        @media (max-width: 800px) {
            .site-header { padding: 0.8rem 1.2rem; }
            .brand-text { font-size: 1.8rem; }
            .site-logo { width: 130px; }
            .filebase-badge span { display: none; }
            .filebase-badge { padding: 0.4rem 0.8rem; }
            .seo-header h1 { font-size: 1.4rem; }
            .seo-content { padding: 1.5rem; }
        }

        @media (max-width: 700px) {
            .movies-grid { 
                grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
                padding: 1.5rem 1rem 0.5rem;
                gap: 1.2rem;
            }
            .search-section { width: 95%; }
            .search-btn span { display: none; }
            .search-btn { padding: 0.7rem 1.2rem; }
            .search-container { padding-left: 1.2rem; }
            .pagination button { padding: 0.5rem 1rem; }
        }

        /* Mobile: exactly 2 columns, smaller cards */
        @media (max-width: 600px) {
            .movies-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.8rem;
                padding: 1rem 0.8rem 0.5rem;
            }
            .movie-card {
                border-radius: 18px;
            }
            .movie-poster {
                height: 50%; /* less height to leave room for text */
            }
            .movie-info {
                padding: 0.5rem 0.5rem 0.4rem;
            }
            .movie-title {
                font-size: 0.9rem;
                -webkit-line-clamp: 2;
            }
            .movie-description {
                font-size: 0.65rem;
                -webkit-line-clamp: 2;
                margin-bottom: 0.1rem;
            }
            .download-btn {
                padding: 0.3rem 0.4rem;
                font-size: 0.65rem;
                gap: 4px;
            }
            .download-btn i {
                font-size: 0.6rem;
            }
            /* Hide description on very small screens if needed? Keeping it. */
        }

        @media (max-width: 480px) {
            .movie-title {
                font-size: 0.8rem;
            }
            .movie-description {
                font-size: 0.6rem;
            }
            .download-btn {
                font-size: 0.6rem;
            }
        }

        @media (max-width: 360px) {
            .movie-title { font-size: 0.75rem; }
            .movie-description { font-size: 0.55rem; }
        }
    </style>
</head>
<body>
    <header class="site-header">
        <div class="logo-container">
            <a href="index.html" class="logo-link">
                <span class="brand-text"><span>CGP</span>LAY</span>
            </a>
        </div>
    </header>

    <section class="seo-header">
        <h1>Download Movies Free - Tamil, Hindi, Telugu HD Movies</h1>
        <p>Best free movie download website for latest Tamil movie download, Hindi movie download, Telugu movies download. Get MP4 movies, Tamil dubbed movie download, and new releases in HD quality.</p>
    </section>

    <div class="search-section">
        <div class="search-container">
            <i class="fas fa-search" aria-hidden="true"></i>
            <input type="text" id="searchInput" placeholder="Search Tamil, Hindi, Telugu movies..." autocomplete="off" aria-label="Search movies">
            <button class="search-btn" id="searchButton">
                <i class="fas fa-filter"></i>
                <span>Search</span>
            </button>
        </div>
        <p id="movieCounter">üé¨ loading movies...</p>
    </div>

    <main id="moviesContainer" class="movies-grid">
        <div class="status-message"><i class="fas fa-spinner fa-pulse"></i> loading movie vault...</div>
    </main>

    <!-- Pagination controls will be inserted here dynamically -->
    <div id="paginationContainer" class="pagination"></div>

    <section class="seo-content">
        <h2>Free Movie Download Website - CGPlay</h2>
        <p>CGPlay is your ultimate destination for free movie downloads. Download movies free in HD quality including Tamil movie download, Hindi movie download, and Telugu movies download. Our movie download website offers the latest new movie download options with direct MP4 movie links.</p>
        <h3 style="font-size:1.2rem; color:#f0f0fa; margin:1.5rem 0 1rem;">Available Movie Categories:</h3>
        <ul>
            <li><i class="fas fa-film"></i> Tamil Movie Download</li>
            <li><i class="fas fa-film"></i> Hindi Movie Download</li>
            <li><i class="fas fa-film"></i> Telugu Movies Download</li>
            <li><i class="fas fa-film"></i> Tamil Dubbed Movie Download</li>
            <li><i class="fas fa-film"></i> MP4 Movie Downloads</li>
            <li><i class="fas fa-film"></i> New Movie Download</li>
            <li><i class="fas fa-film"></i> HD Quality Movies</li>
            <li><i class="fas fa-film"></i> Latest Releases</li>
        </ul>
        <p>Search and download your favorite Tamil dubbed movie download content, explore new movie download options daily, and enjoy unlimited free movies site access. CGPlay is designed as a user-friendly movie download website with a clean interface and fast download speeds.</p>
    </section>

    <footer>
        <span>¬© 2025 CGPLAY - Free Movie Download Website</span>
        <span>Tamil Movies | Hindi Movies | Telugu Movies</span>
    </footer>

    <!-- FIREBASE SDK (v12.9.0 modular) -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-analytics.js";
        import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/12.9.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAYV2Wbo67_iqvMrmH9vT_4F4kYBKRLFWA",
            authDomain: "cgplay-a2384.firebaseapp.com",
            projectId: "cgplay-a2384",
            storageBucket: "cgplay-a2384.firebasestorage.app",
            messagingSenderId: "778930899763",
            appId: "1:778930899763:web:0edca39ca044d421cf8c46",
            measurementId: "G-X16NPMVFFQ"
        };

        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);

        const container = document.getElementById('moviesContainer');
        const searchInput = document.getElementById('searchInput');
        const searchBtn = document.getElementById('searchButton');
        const movieCounter = document.getElementById('movieCounter');
        const paginationDiv = document.getElementById('paginationContainer');

        let allMovies = [];
        let filteredMovies = [];
        let currentPage = 1;
        const itemsPerPage = 8;

        function createMovieCard(movie) {
            const card = document.createElement('div');
            card.className = 'movie-card';

            const poster = document.createElement('img');
            poster.className = 'movie-poster';
            poster.src = movie.logoUrl || 'https://placehold.co/600x900/1f1f2a/aaa?text=NO+POSTER';
            poster.alt = `${movie.name || 'Movie'} - Download free`;
            poster.loading = 'lazy';
            card.appendChild(poster);

            const info = document.createElement('div');
            info.className = 'movie-info';

            const title = document.createElement('h3');
            title.className = 'movie-title';
            title.textContent = movie.name || 'Untitled';
            info.appendChild(title);

            const desc = document.createElement('p');
            desc.className = 'movie-description';
            desc.textContent = movie.description || 'Download this movie in HD quality.';
            info.appendChild(desc);

            // Screenshot hidden on homepage
            const screenDiv = document.createElement('div');
            screenDiv.className = 'screenshot-container';
            if (movie.screenshotUrl) {
                const screenshot = document.createElement('img');
                screenshot.className = 'movie-screenshot';
                screenshot.src = movie.screenshotUrl;
                screenshot.alt = `${movie.name} screenshot`;
                screenshot.loading = 'lazy';
                screenDiv.appendChild(screenshot);
            } else {
                screenDiv.style.background = '#0d0d15';
                screenDiv.style.display = 'flex';
                screenDiv.style.alignItems = 'center';
                screenDiv.style.justifyContent = 'center';
                screenDiv.style.color = '#6b7280';
                screenDiv.style.fontSize = '0.7rem';
                screenDiv.textContent = 'üé¨ no screenshot';
            }
            info.appendChild(screenDiv);

            // üîó Link to detail page using Firestore document ID
            const downloadBtn = document.createElement('a');
            downloadBtn.className = 'download-btn';
            downloadBtn.href = `movie.html?id=${movie.id}`;
            downloadBtn.target = '_blank';
            downloadBtn.rel = 'noopener noreferrer';
            downloadBtn.setAttribute('aria-label', `Download ${movie.name || 'movie'} free`);
            downloadBtn.innerHTML = `<i class="fas fa-download"></i> download free`;
            info.appendChild(downloadBtn);
            card.appendChild(info);
            return card;
        }

        function renderMovies() {
            container.innerHTML = '';

            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const paginatedMovies = filteredMovies.slice(start, end);

            const total = filteredMovies.length;
            const rangeStart = total === 0 ? 0 : start + 1;
            const rangeEnd = Math.min(end, total);
            movieCounter.innerHTML = `üé¨ showing ${rangeStart}-${rangeEnd} of ${total} movies ¬∑ HD MP4`;

            if (paginatedMovies.length === 0) {
                const noEl = document.createElement('div');
                noEl.className = 'no-results';
                noEl.innerHTML = `<i class="fas fa-film"></i> no matching movies ¬∑ 
                    <span style="border-bottom:1px dotted; cursor:pointer;" onclick="document.getElementById('searchInput').value=''; window.appRenderMovies();">clear search</span>`;
                container.appendChild(noEl);
                paginationDiv.innerHTML = '';
                return;
            }

            paginatedMovies.forEach(movie => {
                container.appendChild(createMovieCard(movie));
            });

            renderPaginationControls(total);
        }

        function renderPaginationControls(totalItems) {
            const totalPages = Math.ceil(totalItems / itemsPerPage);
            if (totalPages <= 1) {
                paginationDiv.innerHTML = '';
                return;
            }

            let html = `
                <button class="prev-btn" ${currentPage === 1 ? 'disabled' : ''}>
                    <i class="fas fa-chevron-left"></i> Prev
                </button>
                <div class="page-numbers">
            `;

            const maxVisible = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxVisible / 2));
            let endPage = Math.min(totalPages, startPage + maxVisible - 1);
            if (endPage - startPage + 1 < maxVisible) {
                startPage = Math.max(1, endPage - maxVisible + 1);
            }

            if (startPage > 1) {
                html += `<button class="page-btn" data-page="1">1</button>`;
                if (startPage > 2) html += `<span style="color:#6b7280; padding:0 0.2rem;">...</span>`;
            }

            for (let i = startPage; i <= endPage; i++) {
                html += `<button class="page-btn ${i === currentPage ? 'active-page' : ''}" data-page="${i}">${i}</button>`;
            }

            if (endPage < totalPages) {
                if (endPage < totalPages - 1) html += `<span style="color:#6b7280; padding:0 0.2rem;">...</span>`;
                html += `<button class="page-btn" data-page="${totalPages}">${totalPages}</button>`;
            }

            html += `
                </div>
                <button class="next-btn" ${currentPage === totalPages ? 'disabled' : ''}>
                    Next <i class="fas fa-chevron-right"></i>
                </button>
            `;

            paginationDiv.innerHTML = html;

            paginationDiv.querySelectorAll('.page-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    currentPage = parseInt(btn.dataset.page);
                    renderMovies();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });

            paginationDiv.querySelector('.prev-btn')?.addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderMovies();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            });

            paginationDiv.querySelector('.next-btn')?.addEventListener('click', () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    renderMovies();
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                }
            });
        }

        window.appRenderMovies = (resetPage = true) => {
            if (resetPage) currentPage = 1;
            renderMovies();
        };

        async function loadMoviesFromFirebase() {
            try {
                container.innerHTML = '<div class="status-message"><i class="fas fa-spinner fa-pulse"></i> loading free movie downloads...</div>';
                
                const querySnapshot = await getDocs(collection(db, 'movies'));
                allMovies = [];
                
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    if (data.name || data.logoUrl) {
                        allMovies.push({ ...data, id: doc.id });
                    }
                });

                if (allMovies.length === 0) {
                    container.innerHTML = `<div class="status-message">
                        <i class="fas fa-database" style="opacity:0.7;"></i> no movies found in database.<br>
                        <span style="font-size:1rem; display:block; margin-top:1rem;">‚û°Ô∏è add documents to the <strong>movies</strong> collection.</span>
                    </div>`;
                    movieCounter.innerHTML = 'üé¨ 0 movies ‚Äî database empty';
                    paginationDiv.innerHTML = '';
                    return;
                }

                filteredMovies = [...allMovies];
                currentPage = 1;
                renderMovies();
            } catch (error) {
                console.error('Firebase error:', error);
                container.innerHTML = `<div class="status-message" style="color:#ffb3b3;">
                    <i class="fas fa-exclamation-triangle"></i> failed to load movies.<br>
                    <span style="font-size:1rem;">${error.message}</span><br>
                    <span style="font-size:0.9rem; margin-top:1rem; display:block;">üîí check Firestore rules</span>
                </div>`;
                movieCounter.innerHTML = '‚ö†Ô∏è connection error';
                paginationDiv.innerHTML = '';
            }
        }

        function handleSearch() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            if (searchTerm === '') {
                filteredMovies = [...allMovies];
            } else {
                filteredMovies = allMovies.filter(movie => 
                    (movie.name && movie.name.toLowerCase().includes(searchTerm)) ||
                    (movie.description && movie.description.toLowerCase().includes(searchTerm))
                );
            }
            currentPage = 1;
            renderMovies();
        }

        searchInput.addEventListener('input', handleSearch);
        searchInput.addEventListener('keyup', (e) => {
            if (e.key === 'Enter') handleSearch();
        });
        searchBtn.addEventListener('click', handleSearch);

        loadMoviesFromFirebase();
    </script>
</body>
</html>
